<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · SpineInterface.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>SpineInterface.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>Home</a><ul class="internal"><li><a class="toctext" href="#Compatibility-1">Compatibility</a></li><li><a class="toctext" href="#Installation-1">Installation</a></li><li><a class="toctext" href="#Quick-start-guide-1">Quick start guide</a></li><li><a class="toctext" href="#Library-outline-1">Library outline</a></li></ul></li><li><a class="toctext" href="library/">Library</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Home</a></li></ul><a class="edit-page" href="https://github.com/Spine-project/SpineInterface.jl/blob/master/docs/src/index.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Home</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="SpineInterface.jl-1" href="#SpineInterface.jl-1">SpineInterface.jl</a></h1><p>This package provides the ability to access the contents of a Spine database in a way that&#39;s convenient for writing algorithms. The function <code>using_spinedb</code> is the main star of the package. It receives the url of a Spine database and a Julia module,  and creates a series of convenience functions to retrieve the contents of the database inside that module. In this way, you can populate a Spine database with your data for, e.g., and optimisation model, call <code>using_spinedb</code> to generate convenience functions, and then use those functions in your module to do something specific. This allows you to develop fully data-driven applications. One key example is the <a href="https://github.com/Spine-project/SpineOpt.jl"><code>SpineOpt</code></a> package, which uses this technique to generate and run energy system integration models.</p><h2><a class="nav-anchor" id="Compatibility-1" href="#Compatibility-1">Compatibility</a></h2><p>This package requires Julia 1.2 or later.</p><h2><a class="nav-anchor" id="Installation-1" href="#Installation-1">Installation</a></h2><pre><code class="language-julia">julia&gt; using Pkg

julia&gt; pkg&quot;registry add https://github.com/Spine-project/SpineJuliaRegistry&quot;

julia&gt; pkg&quot;add SpineInterface&quot;
</code></pre><h2><a class="nav-anchor" id="Quick-start-guide-1" href="#Quick-start-guide-1">Quick start guide</a></h2><p>Once <code>SpineInterface</code> is installed, to use it in your programs you just need to say:</p><pre><code class="language-julia-repl">julia&gt; using SpineInterface</code></pre><p>To generate convenience functions for a Spine database, just run:</p><pre><code class="language-julia">julia&gt; using_spinedb(&quot;...url of a Spine database...&quot;)</code></pre><p><strong>The recomended way of creating, populating, and maintaining Spine databases is through  <a href="https://github.com/Spine-project/Spine-Toolbox">Spine Toolbox</a>.</strong> However, here we present an alternative method that only requires <code>SpineInterface</code>, just so you get an idea of how <code>using_spinedb</code> works.</p><p>Create a new Spine database by running:</p><pre><code class="language-julia-repl">julia&gt; url = &quot;sqlite:///example.db&quot;;

julia&gt; db_api.create_new_spine_database(url);
</code></pre><p>The above will create a SQLite file called <code>example.db</code> in the present working directory with the Spine database schema.</p><p>The next step is to add some content to the database. Run:</p><pre><code class="language-julia-repl">julia&gt; db_api.import_data_to_url(url; object_classes=[&quot;actor&quot;, &quot;film&quot;])
</code></pre><p>The above will add two object classes called <code>&quot;actor&quot;</code> and <code>&quot;film&quot;</code> to the database, and commit the changes so they become visible.</p><p>At this point, calling <code>using_spinedb</code> will already generate a convenience function for each of these object classes. Run:</p><pre><code class="language-julia-repl">julia&gt; using_spinedb(url)

julia&gt; actor()
0-element Array{Union{Int64, T} where T&lt;:SpineInterface.AbstractObject,1}

julia&gt; film()
0-element Array{Union{Int64, T} where T&lt;:SpineInterface.AbstractObject,1}
</code></pre><p>As you can see, both <code>actor()</code> and <code>film()</code> return 0-element <code>Array</code>s. That&#39;s because none of these classes has any objects yet. Let&#39;s see what happens if we add some. Run:</p><pre><code class="language-julia-repl">julia&gt; objects = [
	[&quot;actor&quot;, &quot;Phoenix&quot;], 
	[&quot;actor&quot;, &quot;Johansson&quot;], 
	[&quot;film&quot;, &quot;Her&quot;], 
	[&quot;film&quot;, &quot;Joker&quot;]
];

julia&gt; db_api.import_data_to_url(url; objects=objects)

julia&gt; using_spinedb(url)

julia&gt; actor()
2-element Array{Union{Int64, T} where T&lt;:SpineInterface.AbstractObject,1}:
 Phoenix
 Johansson

julia&gt; film()
2-element Array{Union{Int64, T} where T&lt;:SpineInterface.AbstractObject,1}:
 Her
 Joker

julia&gt; film(:Her)
Her

julia&gt; typeof(ans)
Object
</code></pre><p>Things got a little bit more interesting.</p><p>Now let&#39;s see what happens if we add some relationships to the database:</p><pre><code class="language-julia-repl">julia&gt; relationship_classes = [[&quot;actor__film&quot;, [&quot;actor&quot;, &quot;film&quot;]]];

julia&gt; relationships = [
	[&quot;actor__film&quot;, [&quot;Phoenix&quot;, &quot;Joker&quot;]], 
	[&quot;actor__film&quot;, [&quot;Phoenix&quot;, &quot;Her&quot;]], 
	[&quot;actor__film&quot;, [&quot;Johansson&quot;, &quot;Her&quot;]]
];

julia&gt; db_api.import_data_to_url(
	url; relationship_classes=relationship_classes, relationships=relationships
)
</code></pre><p>The above will add a relationship class called <code>&quot;actor__film&quot;</code>  between the <code>&quot;actor&quot;</code> and <code>&quot;film&quot;</code> object classes, and a couple of relationships of that class. Now let&#39;s see the effect of calling <code>using_spinedb</code>:</p><pre><code class="language-julia-repl">julia&gt; using_spinedb(url)

julia&gt; actor__film()
3-element Array{NamedTuple{K,V} where V&lt;:Tuple{Vararg{Union{Int64, T} where T&lt;:SpineInterface.AbstractObject,N} where N} where K,1}:
 (actor = Phoenix, film = Her)
 (actor = Johansson, film = Her)
 (actor = Phoenix, film = Joker)

julia&gt; actor__film(actor=actor(:Johansson))
1-element Array{Object,1}:
 Her

julia&gt; actor__film(film=film(:Her))
2-element Array{Object,1}:
 Johansson
 Phoenix
</code></pre><p>Finally, let&#39;s add some parameters and some values to the database:</p><pre><code class="language-julia-repl">julia&gt; object_parameters = [[&quot;film&quot;, &quot;release_year&quot;]];

julia&gt; relationship_parameters = [[&quot;actor__film&quot;, &quot;character_name&quot;]];

julia&gt; object_parameter_values = [
	[&quot;film&quot;, &quot;Joker&quot;, &quot;release_year&quot;, 2019],
	[&quot;film&quot;, &quot;Her&quot;, &quot;release_year&quot;, 2013],
];

julia&gt; relationship_parameter_values = [
	[&quot;actor__film&quot;, [&quot;Phoenix&quot;, &quot;Joker&quot;], &quot;character_name&quot;, &quot;Arthur&quot;], 
	[&quot;actor__film&quot;, [&quot;Phoenix&quot;, &quot;Her&quot;], &quot;character_name&quot;, &quot;Theodore&quot;], 
	[&quot;actor__film&quot;, [&quot;Johansson&quot;, &quot;Her&quot;], &quot;character_name&quot;, &quot;Samantha&quot;]
];

julia&gt; db_api.import_data_to_url(
	url;
	object_parameters=object_parameters, 
	relationship_parameters=relationship_parameters, 
	object_parameter_values=object_parameter_values,
	relationship_parameter_values=relationship_parameter_values
)</code></pre><p>And after calling <code>using_spinedb</code>:</p><pre><code class="language-none">julia&gt; using_spinedb(url)

julia&gt; release_year(film=film(:Joker))
2019

julia&gt; release_year(film=film(:Her))
2013

julia&gt; character_name(film=film(:Joker), actor=actor(:Phoenix))
:Arthur

julia&gt; character_name(actor=actor(:Johansson), film=film(:Her))
:Samantha

julia&gt; character_name(actor=actor(:Johansson), film=film(:Joker))
ERROR: parameter character_name is not specified for argument(s) :actor =&gt; Johansson:film =&gt; Joker</code></pre><h2><a class="nav-anchor" id="Library-outline-1" href="#Library-outline-1">Library outline</a></h2><ul><li><a href="library/#Library-1">Library</a></li><ul><li><a href="library/#Contents-1">Contents</a></li><li><a href="library/#Index-1">Index</a></li><li><a href="library/#Types-1">Types</a></li><li><a href="library/#Functions-1">Functions</a></li><li><a href="library/#Constants-1">Constants</a></li></ul></ul><footer><hr/><a class="next" href="library/"><span class="direction">Next</span><span class="title">Library</span></a></footer></article></body></html>
